let accepted=localStorage.getItem("termsAccepted");function showModal(){let e=document.getElementById("myModal");e.style.display="block";let t=document.querySelector(".close");t.addEventListener("click",()=>{e.style.display="none"});let a=document.getElementById("acceptButton");a.addEventListener("click",()=>{document.getElementById("acceptTerms").checked?(localStorage.setItem("termsAccepted","true"),e.style.display="none"):alert("Please accept the Terms and Conditions.")})}accepted||showModal(),document.addEventListener("contextmenu",function(e){e.preventDefault()});import{initializeApp as e}from"https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";import{getDatabase as t,ref as a,set as l,push as d}from"https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";let firebaseConfig={apiKey:"AIzaSyCMIb4vvq6pO79g_v4qRCeyGADDLlqNgbg",authDomain:"sahay-f4937.firebaseapp.com",databaseURL:"https://sahay-f4937-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"sahay-f4937",storageBucket:"sahay-f4937.appspot.com",messagingSenderId:"780480878569",appId:"1:780480878569:web:9a959d8b28818493addd78",measurementId:"G-RFNW3VNTEP"},app=e(firebaseConfig),db=t(app);function validateMobileNumber(e){return/^\d{10}$/.test(e)}function validateRequiredFields(){let e=document.getElementById("disasterType").value,t=document.getElementById("loc_latitude").value,a=document.getElementById("loc_longitude").value,l=document.getElementById("mobileNumber").value;for(var d=document.getElementById("mediaUpload"),s=!0,i=0;i<d.files.length;i++)if(d.files[i].size>5242880){s=!1;break}return s?e?t&&a?validateMobileNumber(l)?!!d.files.length||(alert("Please select at least one photo or video for upload."),!1):(alert("Please enter a valid 10-digit mobile number"),!1):(alert("Please enter latitude and longitude."),!1):(alert("Please select a type of disaster."),!1):(alert("Please upload media files with a size of up to 5MB each."),!1)}function submitForm(){if(!validateRequiredFields())return;let e=d(a(db,"submitForm")),t=new Date(Date.now()+198e5),s=getSelectedValues(document.getElementById("urgentNeeds"));l(e,{timestamp:t.toISOString(),disasterType:document.getElementById("disasterType").value,latitude:document.getElementById("loc_latitude").value,longitude:document.getElementById("loc_longitude").value,mobileNumber:document.getElementById("mobileNumber").value,urgentNeeds:s,mediaUpload:document.getElementById("mediaUpload").value}).then(()=>{document.getElementById("mediaUploadAlert").style.display="block",setTimeout(()=>{document.getElementById("mediaUploadAlert").style.display="none"},3e3),document.querySelector(".alert").style.display="block",setTimeout(()=>{document.querySelector(".alert").style.display="none"},5e3),document.getElementById("reportForm").reset()}).catch(e=>{console.error("Error submitting the form: ",e)})}function getSelectedValues(e){let t=[],a=e.options;for(let l=0;l<a.length;l++)a[l].selected&&t.push(a[l].value);return t}document.getElementById("submit").addEventListener("click",e=>{e.preventDefault(),submitForm()});